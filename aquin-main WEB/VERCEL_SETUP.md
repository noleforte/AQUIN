# Настройка Vercel с OpenAI API

## Шаг 1: Настройка переменных окружения

1. **Перейдите в Vercel Dashboard:**
   - Откройте [vercel.com](https://vercel.com)
   - Войдите в свой аккаунт
   - Найдите ваш проект

2. **Добавьте переменную окружения:**
   - Перейдите в **Settings** → **Environment Variables**
   - Нажмите **Add New**
   - Введите:
     - **Name:** `OPENAI_API_KEY`
     - **Value:** ваш OpenAI API ключ
     - **Environment:** Production (и Development если нужно)
   - Нажмите **Save**

## Шаг 2: Структура файлов

Убедитесь, что у вас есть следующие файлы:

```
aquin-main WEB/
├── api/
│   └── chat.js          # Скопируйте из vercel-api/chat.js
├── vercel.json          # Конфигурация Vercel
└── index.html           # Ваш основной файл
```

## Шаг 3: Развертывание

### Вариант A: Через Vercel CLI

```bash
# Установите Vercel CLI
npm i -g vercel

# Войдите в Vercel
vercel login

# Перейдите в папку проекта
cd "aquin-main WEB"

# Разверните проект
vercel --prod
```

### Вариант B: Через GitHub

1. **Загрузите код в GitHub**
2. **Подключите репозиторий к Vercel**
3. **Vercel автоматически развернет проект**

### Вариант C: Ручная загрузка

1. **Создайте новый проект в Vercel**
2. **Загрузите файлы:**
   - `api/chat.js`
   - `vercel.json`
   - `index.html`
3. **Настройте переменные окружения**

## Шаг 4: Проверка

После развертывания:

1. **Откройте ваш сайт**
2. **Попробуйте отправить сообщение в чате**
3. **Проверьте логи в Vercel Dashboard**

## Возможные проблемы

### Ошибка 404 для /api/chat
- Убедитесь, что файл `api/chat.js` находится в правильной папке
- Проверьте, что `vercel.json` правильно настроен

### Ошибка "OpenAI API key not configured"
- Проверьте, что переменная `OPENAI_API_KEY` добавлена в Vercel
- Убедитесь, что переменная доступна в Production environment

### Ошибка CORS
- Vercel API функции автоматически обрабатывают CORS
- Если проблема остается, проверьте настройки в `chat.js`

## Тестирование

Используйте `test-backend.html` для проверки:

1. **Откройте файл в браузере**
2. **Нажмите "Test Vercel API"**
3. **Проверьте результат**

## Преимущества этого решения

✅ **Прямая интеграция с OpenAI** - нет промежуточных серверов
✅ **Быстрая работа** - Vercel edge functions
✅ **Надежность** - автоматическое масштабирование
✅ **Безопасность** - API ключ хранится в переменных окружения
✅ **Простота** - один файл для всей логики

## Следующие шаги

После успешного развертывания:

1. **Протестируйте чат**
2. **Настройте мониторинг** в Vercel Dashboard
3. **Оптимизируйте промпты** при необходимости 